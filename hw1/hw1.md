# Домашняя работа 1 по курсу Системный дизайн высоконагруженных проектов от DevHands.io
## Условие
###### В городе - сателлите миллионника проживает 50.000 человек. Половина работающих - работают в миллионнике, четверть - добираются на электричке. Спланируйте расписание и вместимость электричек.
### Варианты для исполнения
* дорого делать, но быстро обслуживать
* дешевле делать, но клиенты будут ждать дольше.

### Решение
#### Дорогой вариант

[Численность](https://rosstat.gov.ru/storage/mediabank/Trud_2023.pdf) населения (на конец 2022 года) 146 447 000

[Численность](https://rosstat.gov.ru/storage/mediabank/Trud_2023.pdf) рабочей силы (занятые) 74 924 000.

Исходя из этого по России занято 51% населения, что будет принято за занятость в городе сателите.

По разной информации из СМИ по сменам работают 66% занятых, по сменам ночами и выходными 34%, в графике 5/2 работают 60-70% занятых

Примем то что треть работает в непрерывном графике, треть только по утрам и треть 5/2 в разное время. По 17% население занятого работой в мегаполисе.

Работа только днем по графику 5/2 может начинаться с 7 до 11 по нормальному распределению (выходящие за это время выходят за 99 персентиль выхода за среднее и не учитываются). Для упрощения расчета делим всех на 5 групп и считаем 9 часов временем с максимальным количеством начинающих работу, 8 и 10 временем с началом работы в 2 раза меньшего количества и 7, 11 с еще в 2 раза меньшим количеством.

`max + 2 max/2 + 2 max / 4 = 17`

`max = 17 / 2.5 = 6,8 %`

В непрерывном графике работают 17% населения. Предположим что в гарфике по 8 часов работает половина, половина в графике по 12, в 1 смену работают `17 / 2 / 4 = 2,125`.

в сменном графике 5/2 работают 17% населения. Предположим в 2 сменном (без ночей) работает половина и 3 сменном (с ночами) работает половина. Тогда для двухсменного численность отправки на смену `17 / 2 / 2 = 4,25`. и Для трехсменного `17 / 2 / 3 = 2,833`.

результат в таблице

| время\заголовок | 5/2 | 4 см по 8 | 4 см по 12 | 2 см 5/2 | 3 см 5/2 | сумма, % | сумма, человек | сумма вых, % | сумма вых, человек |
|-----------------|-----|-----------|------------|----------|----------|----------|----------------|--------------|---------------------|
| 7               | 1.70|           |            |          |          | 1.70     | 425            | 0.0          | -                   |
| 8               | 3.40| 2.13      | 2.13       |          | 4.25     | 14.73    | 3,683          | 4.3          | 1,063               |
| 9               | 6.80|           |            |          |          | 6.80     | 1,700          | 0.0          | -                   |
| 10              | 3.40|           |            |          |          | 3.40     | 850            | 0.0          | -                   |
| 11              | 1.70|           |            |          |          | 1.70     | 425            | 0.0          | -                   |
| 16              |     | 2.13      |            | 4.25     | 2.83     | 9.21     | 2,301          | 2.1          | 531                 |
| 20              |     |           | 2.13       |          |          | 2.13     | 531            | 2.1          | 531                 |
| 24              |     |           |            |          | 2.83     | 4.96     | 1,239          | 2.1          | 531                 |


в вагоне 117 сидячих мест, 150 всего. Пусть время в пути будет 30 минут, время прибытия за 20 минут до начала рабочей смены, минимальный интервал отправления 10 минут. Результирующее расписание в таблице 2.


| время\заголовок | сумма / вых, чел | вагонов / вых | составов | составов в вых | вагонов | вагонов в вых | расписание отправления      |
|-----------------|------------------|---------------|----------|----------------|---------|---------------|-----------------------------|
| 7               | 425/0            | 2.8/0        | 1        | 0              | 4       | 0             | 6:10                        |
| 8               | 3683/1063        | 24.6/7.1     | 3        | 1              | 8       | 8             | 6:50, 7:00, 7:10            |
| 9               | 1700/0           | 11.3/0       | 2        | 0              | 8       | 0             | 8:00, 8:10                  |
| 10              | 850/0            | 5.7/0        | 1        | 0              | 8       | 0             | 9:10                        |
| 11              | 425/0            | 2.8/0        | 1        | 0              | 4       | 4             | 10:10                       |
| 16              | 2301/531         | 15.3/3.5     | 2        | 1              | 8       | 4             | 15:00, 15:10                |
| 20              | 531/531          | 3.5/3.5      | 1        | 1              | 4       | 4             | 19:10                       |
| 24              | 1239/531         | 8.3/3.5      | 1        | 1              | 8       | 4             | 23:10                       |


Обратно с учетом того что на графике 5/2 с утра работа по 9 часов, на сменных графиках по 8 часов и отправление через 20 минут после окончания рабочего дня расчет в таблице 3 и 4

| время\заголовок | 5/2 | 4 см по 8 | 4 см по 12 | 2 см 5/2 | 3 см 5/2 | сумма, % | сумма, человек | сумма вых, % | сумма вых, человек |
|-----------------|-----|-----------|------------|----------|----------|----------|----------------|--------------|---------------------|
| 8               |     | 2.13      | 2.13       |          | 2.83     | 7.08     | 1,770          | 4.25         | 1,062.5            |
| 16              | 1.70| 2.13      | 2.13       | 4.25     | 2.83     | 13.03    | 3,258          | 4.25         | 1,062.5            |
| 17              | 3.40|           |            |          |          | 3.40     | 850            | 0.00         | 0                  |
| 18              | 6.80|           |            |          |          | 6.80     | 1,700          | 0.00         | 0                  |
| 19              | 3.40|           |            |          |          | 3.40     | 850            | 0.00         | 0                  |
| 20              | 1.70|           |            |          |          | 1.70     | 425            | 0.00         | 0                  |
| 24              |     | 2.13      |            | 4.25     | 2.83     | 9.21     | 2,301          | 2.13         | 531.25             |


| время\заголовок | сумма / вых, чел | вагонов / вых | составов | составов в вых | вагонов | вагонов в вых | расписание отп            |
|-----------------|------------------|---------------|----------|----------------|---------|---------------|---------------------------|
| 8               | 1770 / 1063      | 11.8 / 7.1   | 1        | 1              | 12      | 8             | 8:20, 8:30                |
| 16              | 3258 / 1063      | 21.7 / 7.1   | 3        | 1              | 8       | 8             | 16:20, 16:30, 16:40       |
| 17              | 850 / 0          | 5.7 / 0      | 1        | 0              | 8       | 0             | 17:20                     |
| 18              | 1700 / 0         | 11.3 / 0     | 1        | 0              | 12      | 0             | 18:20                     |
| 19              | 850 / 0          | 5.7 / 0      | 1        | 0              | 8       | 0             | 19:20                     |
| 20              | 425 / 0          | 2.8 / 0      | 1        | 0              | 4       | 0             | 20:20                     |
| 24              | 2301 / 531       | 15.3 / 3.5   | 2        | 1              | 8       | 4             | 0:20, 0:30                |


#### Дешевый вариант

Расчет пассажиропотока с большими задержками в таблице 5 

| время\заголовок | 5/2 | 4 см по 8 | 4 см по 12 | 2 см 5/2 | 3 см 5/2 | сумма, % | сумма, человек | сумма вых, % | сумма вых, человек |
|-----------------|-----|-----------|------------|----------|----------|----------|----------------|--------------|---------------------|
| 7               | 1.70|           |            |          |          | 1.70     | 425            | 0.0          | -                   |
| 8               | 3.40| 2.13      | 2.13       | 4.25     | 2.83     | 14.73    | 3,683          | 4.3          | 1,063               |
| 9               | 6.80|           |            |          |          | 6.80     | 1,700          | 0.0          | -                   |
| 10              | 3.40|           |            |          |          | 3.40     | 850            | 0.0          | -                   |
| 11              | 1.70|           |            |          |          | 1.70     | 425            | 0.0          | -                   |
| 16              |     | 2.13      |            | 4.25     | 2.83     | 9.21     | 2,301          | 2.1          | 531                 |
| 20              |     |           | 2.13       |          |          | 2.13     | 531            | 2.1          | 531                 |
| 24              |     | 2.13      |            |          | 2.83     | 4.96     | 1,239          | 2.1          | 531                 |


Расписание для пасажиропотока с большими задержками в таблице 6

| время\заголовок | сумма / вых, чел | вагонов / вых | составов | составов в вых | вагонов | вагонов в вых | расписание отправления |
|-----------------|------------------|----------------|----------|----------------|---------|---------------|-------------------------|
| 7               | 425/0            | 2.8/0         | 1        | 0              | 4       | 0             | 6:20                    |
| 8               | 3683/1063        | 24.6/7.1      | 2        | 1              | 12      | 8             | 6:50, 7:10              |
| 9               | 1700/0           | 11.3/0        | 2        | 0              | 10      | 0             | 8:00, 8:20              |
| 10              | 850/0            | 5.7/0         | 0        | 0              | 0       | 0             |                         |
| 11              | 425/0            | 2.8/0         | 0        | 0              | 0       | 0             |                         |
| 16              | 2301/531         | 15.3/3.5      | 2        | 1              | 8       | 4             | 15:00, 15:10            |
| 20              | 531/531          | 3.5/3.5       | 1        | 1              | 4       | 4             | 19:10                   |
| 24              | 1239/531         | 8.3/3.5       | 1        | 1              | 8       | 4             | 23:10                   |



Расчет пассажиропотока с большими задержками обратно в таблице 7 

| время\заголовок | 5/2 | 4 см по 8 | 4 см по 12 | 2 см 5/2 | 3 см 5/2 | сумма, % | сумма, человек | сумма вых, % | сумма вых, человек |
|-----------------|-----|-----------|------------|----------|----------|----------|----------------|--------------|---------------------|
| 8               |     | 2.13      | 2.13       |          | 2.83     | 7.08     | 1,770          | 4.25         | 1062.5              |
| 16              | 1.70| 2.13      | 2.13       | 4.25     | 2.83     | 13.03    | 3,258          | 4.25         | 1062.5              |
| 17              | 3.40|           |            |          |          | 3.40     | 850            | 0.00         | 0                   |
| 18              | 6.80|           |            |          |          | 6.80     | 1,700          | 0.00         | 0                   |
| 19              | 3.40|           |            |          |          | 3.40     | 850            | 0.00         | 0                   |
| 20              | 1.70|           |            |          |          | 1.70     | 425            | 0.00         | 0                   |
| 24              |     | 2.13      |            | 4.25     | 2.83     | 9.21     | 2,301          | 2.13         | 531.25              |


Расписание для пасажиропотока с большими задержками обратно в таблице 8

| время\заголовок | сумма / вых, чел | вагонов / вых | составов | составов в вых | вагонов | вагонов в вых | расписание отп |
|-----------------|------------------|---------------|----------|----------------|---------|---------------|----------------|
| 8               | 1770 / 1063      | 11.8 / 7.1   | 1        | 1              | 12      | 8             | 8:20           |
| 16              | 3258 / 1063      | 21.7 / 7.1   | 2        | 1              | 8       | 8             | 16:20          |
| 17              | 850 / 0          | 5.7 / 0      | 1        | 0              | 12      | 0             | 17:20          |
| 18              | 1700 / 0         | 11.3 / 0     | 1        | 0              | 12      | 0             | 18:20          |
| 19              | 850 / 0          | 5.7 / 0      | 1        | 0              | 0       | 0             | 19:20          |
| 20              | 425 / 0          | 2.8 / 0      | 1        | 0              | 8       | 0             | 20:20          |
| 24              | 2301 / 531       | 15.3 / 3.5   | 2        | 1              | 8       | 4             | 0:20, 0:30     |



###### Вывод - в первом варианте по будням придется перевозить 84 вагона, а во втором 76. по выходным из-за маленьком нагрузки сэеономить не удалось, оба варианта 20 вагонов за сутки